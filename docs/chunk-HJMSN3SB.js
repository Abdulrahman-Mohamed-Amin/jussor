import{a as I}from"./chunk-RXWL56JA.js";import{b as y,c as f,d as N,e as O,f as C,g as p,h as V,i as T,j as D,o as M,p as k}from"./chunk-5PTRB7GT.js";import{h as G}from"./chunk-3AVQGZ6B.js";import{Ha as g,Ka as S,Oa as v,Pa as w,Qa as E,Ra as F,Sa as t,Ta as u,Ua as P,X as b,Xa as h,Za as a,_a as m,cb as i,db as A,ea as c,fa as d,gb as j,va as _,wa as x}from"./chunk-C2FQAVCM.js";function R(l,n){if(l&1){let e=h();t(0,"form",13),a("ngSubmit",function(){c(e);let r=m();return d(r.sendEditRequest())}),t(1,"i",14),a("click",function(){c(e);let r=m();return d(r.openEditForm=!1)}),u(),t(2,"h2",15),i(3,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0644\u0629"),u(),t(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),i(8,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0639\u0631\u0628\u064A"),t(9,"span",6),i(10,"(\u0645\u0637\u0644\u0648\u0628)"),u(),t(11,"span"),i(12,"*"),u()(),t(13,"input",16),a("input",function(r){c(e);let s=m();return d(s.allowArabicOnly(r))}),u()()(),t(14,"div",3)(15,"div",4)(16,"label",8),i(17,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A"),t(18,"span",6),i(19,"(\u0645\u0637\u0644\u0648\u0628)"),u(),t(20,"span"),i(21,"*"),u()(),t(22,"input",17),a("input",function(r){c(e);let s=m();return d(s.allowEnglishOnly(r))}),u()()(),t(23,"button",10),i(24,"\u0627\u0631\u0633\u0627\u0644"),u()()(),P(25,"div",18)}if(l&2){let e=m();S("formGroup",e.editForm)}}function B(l,n){if(l&1){let e=h();t(0,"tr")(1,"td"),i(2),u(),t(3,"td")(4,"button",19),a("click",function(){let r=c(e).$implicit,s=m();return d(s.editProject(r.id,r))}),i(5," \u062A\u0639\u062F\u064A\u0644 "),u(),t(6,"button",20),a("click",function(){let r=c(e),s=r.$implicit,$=r.$index,z=m();return d(z.deleteProject($,s.id))}),i(7," \u062D\u0630\u0641 "),u()()()}if(l&2){let e=n.$implicit;_(2),A(e.arName)}}var q=class l{constructor(n,e){this._statusService=n;this.toast=e}status=[];openEditForm=!1;statusForm=new C({enName:new p("",f.required),arName:new p("",f.required)});editForm=new C({id:new p(""),enName:new p("",f.required),arName:new p("",f.required)});ngOnInit(){this.getstatus()}addStatus(){this.statusForm.valid?this._statusService.addProjectStatus(this.statusForm.value).subscribe({next:n=>{this.status.push(this.statusForm.value),this.toast.success("\u062A\u0645\u062A \u0627\u0644\u0627\u0636\u0627\u0641\u0629 \u0628\u0646\u062C\u0627\u062D"),this.statusForm.reset()},error:n=>{n.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")},complete:()=>{}}):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}getstatus(){this._statusService.getALlStatus().subscribe(n=>{this.status=n})}editProject(n,e){this.openEditForm=!0,this.editForm.patchValue({id:e.id,enName:e.enName,arName:e.arName})}sendEditRequest(){this.editForm.valid?this._statusService.editStatus(this.editForm.value).subscribe({next:n=>{this.toast.success("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0644\u0629")},error:n=>{n.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")},complete:()=>{setTimeout(()=>{window.location.reload()},1e3)}}):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}deleteProject(n,e){this._statusService.deleteStatus(e).subscribe({next:o=>{this.status.splice(n,1),this.toast.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062D\u0627\u0644\u0629 \u0628\u0646\u062C\u0627\u062D")},error:o=>{o.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")}})}allowEnglishOnly(n){let e=n.target;e.value=e.value.replace(/[^a-zA-Z0-9 ]/g,"")}allowArabicOnly(n){let e=n.target;e.value=e.value.replace(/[^ุก-ู\s\u0621-\u064A]/g,"")}static \u0275fac=function(e){return new(e||l)(x(I),x(G))};static \u0275cmp=b({type:l,selectors:[["app-projects-status"]],standalone:!0,features:[j],decls:38,vars:2,consts:[[1,"container","dash_table"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","col-12"],[1,"form-group"],["for","artitle"],[1,"requierd"],["type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arName",1,"form-control",3,"input"],["for","entitle"],["type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enName",1,"form-control",3,"input"],[1,"dash_btn"],[1,"mt-5"],[1,"project-table"],[1,"hidden_form",3,"ngSubmit","formGroup"],[1,"fas","fa-xmark","close",3,"click"],[1,"text-center"],["autocomplete","off","type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arName",1,"form-control",3,"input"],["autocomplete","off","type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enName",1,"form-control",3,"input"],[1,"lay"],[1,"edit-btn",3,"click"],[1,"delete",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2"),i(2,"\u0627\u0636\u0627\u0641\u0629 \u062D\u0627\u0644\u0629 \u0645\u0634\u0631\u0648\u0639 \u062C\u062F\u064A\u062F\u0629"),u(),t(3,"form",1),a("ngSubmit",function(){return o.addStatus()}),t(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),i(8,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0639\u0631\u0628\u064A"),t(9,"span",6),i(10,"(\u0645\u0637\u0644\u0648\u0628)"),u(),t(11,"span"),i(12,"*"),u()(),t(13,"input",7),a("input",function(s){return o.allowArabicOnly(s)}),u()()(),t(14,"div",3)(15,"div",4)(16,"label",8),i(17,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A"),t(18,"span",6),i(19,"(\u0645\u0637\u0644\u0648\u0628)"),u(),t(20,"span"),i(21,"*"),u()(),t(22,"input",9),a("input",function(s){return o.allowEnglishOnly(s)}),u()()(),t(23,"button",10),i(24,"\u0627\u0631\u0633\u0627\u0644"),u()()(),g(25,R,26,1),t(26,"h2",11),i(27,"\u0627\u0644\u062D\u0627\u0644\u0627\u062A \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629"),u(),t(28,"table",12)(29,"thead")(30,"tr")(31,"th"),i(32,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629"),u(),t(33,"th"),i(34,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),u()()(),t(35,"tbody"),E(36,B,8,1,"tr",null,w),u()()()),e&2&&(_(3),S("formGroup",o.statusForm),_(22),v(o.openEditForm?25:-1),_(11),F(o.status))},dependencies:[M,V,y,N,O,k,T,D],styles:[".form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;color:#333}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;border-radius:6px;font-size:15px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 2px #007bff1a}.hidden_form[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%,-50%);background:#fff;box-shadow:var(--shadow);border-radius:15px;padding:15px 25px;width:50%;height:300px;z-index:5}.lay[_ngcontent-%COMP%]{position:fixed;z-index:3;background:#0000008c;top:0;left:0;width:100%;height:100vh}.close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;color:var(--blue);cursor:pointer}"]})};export{q as ProjectsStatusComponent};
