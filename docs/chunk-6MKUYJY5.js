import{a as I}from"./chunk-M4GPAM2F.js";import{h as G}from"./chunk-3QQLVUTH.js";import"./chunk-NQ4YHR6A.js";import"./chunk-QAAYAOSG.js";import{a as y,b as f,c as N,d as O,e as C,f as d,g as V,h as T,i as M,n as D,o as k}from"./chunk-LXA24ENW.js";import{Na as _,Oa as x,Za as g,_ as b,ab as S,eb as v,fb as F,gb as w,ha as c,hb as P,ia as p,ib as e,jb as u,kb as E,nb as h,pb as s,qb as m,ub as i,vb as A,yb as j}from"./chunk-5G5WSGSK.js";function R(l,n){if(l&1){let t=h();e(0,"form",12),s("ngSubmit",function(){c(t);let r=m();return p(r.sendEditRequest())}),e(1,"i",13),s("click",function(){c(t);let r=m();return p(r.openEditForm=!1)}),u(),e(2,"h2",14),i(3,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0644\u0629"),u(),e(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),i(8,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0639\u0631\u0628\u064A "),e(9,"span"),i(10,"*"),u()(),e(11,"input",15),s("input",function(r){c(t);let a=m();return p(a.allowArabicOnly(r))}),u()()(),e(12,"div",3)(13,"div",4)(14,"label",7),i(15,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A "),e(16,"span"),i(17,"*"),u()(),e(18,"input",16),s("input",function(r){c(t);let a=m();return p(a.allowEnglishOnly(r))}),u()()(),e(19,"button",9),i(20,"\u0627\u0631\u0633\u0627\u0644"),u()()(),E(21,"div",17)}if(l&2){let t=m();S("formGroup",t.editForm)}}function B(l,n){if(l&1){let t=h();e(0,"tr")(1,"td"),i(2),u(),e(3,"td")(4,"button",18),s("click",function(){let r=c(t).$implicit,a=m();return p(a.editProject(r.id,r))}),i(5," \u062A\u0639\u062F\u064A\u0644 "),u(),e(6,"button",19),s("click",function(){let r=c(t),a=r.$implicit,$=r.$index,z=m();return p(z.deleteProject($,a.id))}),i(7," \u062D\u0630\u0641 "),u()()()}if(l&2){let t=n.$implicit;_(2),A(t.arName)}}var q=class l{constructor(n,t){this._statusService=n;this.toast=t}status=[];openEditForm=!1;statusForm=new C({enName:new d("",f.required),arName:new d("",f.required)});editForm=new C({id:new d(""),enName:new d("",f.required),arName:new d("",f.required)});ngOnInit(){this.getstatus()}addStatus(){this.statusForm.valid?(this.status.push(this.statusForm.value),console.log(this.statusForm.value),this._statusService.addProjectStatus(this.statusForm.value).subscribe({next:n=>{this.toast.success("\u062A\u0645\u062A \u0627\u0644\u0627\u0636\u0627\u0641\u0629 \u0628\u0646\u062C\u0627\u062D"),this.statusForm.reset()},error:()=>{this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")},complete:()=>{}})):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}getstatus(){this._statusService.getALlStatus().subscribe(n=>{this.status=n})}editProject(n,t){this.openEditForm=!0,this.editForm.patchValue({id:t.id,enName:t.enName,arName:t.arName})}sendEditRequest(){this.editForm.valid?this._statusService.editStatus(this.editForm.value).subscribe({next:n=>{this.toast.success("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0644\u0629")},error:()=>{this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")},complete:()=>{setTimeout(()=>{window.location.reload()},1e3)}}):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}deleteProject(n,t){this._statusService.deleteStatus(t).subscribe({next:o=>{this.status.splice(n,1),this.toast.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062D\u0627\u0644\u0629 \u0628\u0646\u062C\u0627\u062D")},error:o=>{this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")}})}allowEnglishOnly(n){let t=n.target;t.value=t.value.replace(/[^a-zA-Z0-9 ]/g,"")}allowArabicOnly(n){let t=n.target;t.value=t.value.replace(/[^ุก-ู\s\u0621-\u064A]/g,"")}static \u0275fac=function(t){return new(t||l)(x(I),x(G))};static \u0275cmp=b({type:l,selectors:[["app-projects-status"]],standalone:!0,features:[j],decls:34,vars:2,consts:[[1,"container","dash_table"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","col-12"],[1,"form-group"],["for","artitle"],["type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arName",1,"form-control",3,"input"],["for","entitle"],["type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enName",1,"form-control",3,"input"],[1,"dash_btn"],[1,"mt-5"],[1,"project-table"],[1,"hidden_form",3,"ngSubmit","formGroup"],[1,"fas","fa-xmark","close",3,"click"],[1,"text-center"],["autocomplete","off","type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arName",1,"form-control",3,"input"],["autocomplete","off","type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enName",1,"form-control",3,"input"],[1,"lay"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"h2"),i(2,"\u0627\u0636\u0627\u0641\u0629 \u062D\u0627\u0644\u0629 \u0645\u0634\u0631\u0648\u0639 \u062C\u062F\u064A\u062F\u0629"),u(),e(3,"form",1),s("ngSubmit",function(){return o.addStatus()}),e(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),i(8,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0639\u0631\u0628\u064A "),e(9,"span"),i(10,"*"),u()(),e(11,"input",6),s("input",function(a){return o.allowArabicOnly(a)}),u()()(),e(12,"div",3)(13,"div",4)(14,"label",7),i(15,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A "),e(16,"span"),i(17,"*"),u()(),e(18,"input",8),s("input",function(a){return o.allowEnglishOnly(a)}),u()()(),e(19,"button",9),i(20,"\u0627\u0631\u0633\u0627\u0644"),u()()(),g(21,R,22,1),e(22,"h2",10),i(23,"\u0627\u0644\u062D\u0627\u0644\u0627\u062A \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629"),u(),e(24,"table",11)(25,"thead")(26,"tr")(27,"th"),i(28,"\u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629"),u(),e(29,"th"),i(30,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),u()()(),e(31,"tbody"),w(32,B,8,1,"tr",null,F),u()()()),t&2&&(_(3),S("formGroup",o.statusForm),_(18),v(o.openEditForm?21:-1),_(11),P(o.status))},dependencies:[D,V,y,N,O,k,T,M],styles:[".form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;color:#333}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--main)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;border-radius:6px;font-size:15px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 2px #007bff1a}.hidden_form[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%,-50%);background:#fff;box-shadow:var(--shadow);border-radius:15px;padding:15px 25px;width:50%;height:300px;z-index:5}.lay[_ngcontent-%COMP%]{position:fixed;z-index:3;background:#0000008c;top:0;left:0;width:100%;height:100vh}.close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;color:var(--blue);cursor:pointer}"]})};export{q as ProjectsStatusComponent};
