import{a as $}from"./chunk-ROCF72OG.js";import{a as P,b as m,c as I,d as V,e as k,f as d,g as N,h as j,i as z,o as G}from"./chunk-GYX3UYIK.js";import{h as q}from"./chunk-2NZ5WEEJ.js";import{Bb as D,Fa as h,Ia as C,Ma as g,Na as b,Oa as E,Pa as O,Qa as i,Ra as r,Sa as w,Va as S,W as x,Xa as a,Ya as v,ab as o,bb as F,ca as p,cb as T,da as f,eb as A,fb as M,ta as c,ua as _,zb as y}from"./chunk-2KD2ZHNZ.js";var R=s=>({edit_form:s});function W(s,e){if(s&1){let t=S();i(0,"i",22),a("click",function(){p(t);let l=v();return f(l.closeForm())}),r()}}function Z(s,e){s&1&&w(0,"div",18)}function J(s,e){if(s&1){let t=S();i(0,"tr")(1,"td"),o(2),r(),i(3,"td")(4,"button",23),a("click",function(){let l=p(t).$implicit,u=v();return f(u.editService(l))}),o(5,"\u062A\u0639\u062F\u064A\u0644"),r(),i(6,"button",24),a("click",function(){let l=p(t),u=l.$implicit,B=l.$index,H=v();return f(H.deleteService(B,u.id))}),o(7,"\u062D\u0630\u0641"),r()()()}if(s&2){let t=e.$implicit;c(2),F(t.arTitle)}}var L=class s{constructor(e,t){this._services=e;this.toast=t}services=[];isEditMode=!1;selectedProjectId=null;videoFile=null;imageFiles=[];errorMessage="";addForm=new k({arTitle:new d("",m.required),arDescription:new d("",m.required),enTitle:new d("",m.required),enDescription:new d("",m.required),VideoPath:new d(null),ImageFiles:new d([])});ngOnInit(){this.getServices()}onVideoSelected(e){let t=e.target.files[0];this.videoFile=t||null}onImagesSelected(e){let t=e.target.files;this.imageFiles=[];for(let n=0;n<t.length;n++)this.imageFiles.push(t[n])}closeForm(){this.isEditMode=!1,this.addForm.reset()}getServices(){this._services.getAllServices().subscribe(e=>{this.services=e,console.log(e)})}addService(){let e=new FormData;e.append("arTitle",this.addForm.value.arTitle),e.append("arDescription",this.addForm.value.arDescription),e.append("enTitle",this.addForm.value.enTitle),e.append("enDescription",this.addForm.value.enDescription),this.videoFile&&e.append("videoFile",this.videoFile),this.imageFiles.length>0&&this.imageFiles.forEach(t=>{e.append("imageFiles",t)}),this.addForm.valid?this._services.addService(e).subscribe({next:t=>{console.log(t)},error:t=>{console.log(t)},complete:()=>{window.location.reload()}}):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}editService(e){this.isEditMode=!0,this.selectedProjectId=e.id,this.addForm.patchValue({arTitle:e.arTitle,arDescription:e.arDescription,enTitle:e.enTitle,enDescription:e.enDescription}),this.videoFile=null,this.imageFiles=[]}updateServic(){let e=new FormData;e.append("arTitle",this.addForm.value.arTitle),e.append("arDescription",this.addForm.value.arDescription),e.append("enTitle",this.addForm.value.enTitle),e.append("enDescription",this.addForm.value.enDescription),this.videoFile&&e.append("videoPath",this.videoFile),this.imageFiles.length>0&&this.imageFiles.forEach(t=>{e.append("imageFiles",t)}),this._services.editService(this.selectedProjectId,e).subscribe({next:t=>{this.addForm.reset(),this.isEditMode=!1,this.selectedProjectId=null,this.toast.success("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062E\u062F\u0645\u0629 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.log(t)},complete:()=>{window.location.reload()}})}deleteService(e,t){this._services.deleteService(t).subscribe({next:n=>{this.toast.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062E\u062F\u0645\u0629 \u0628\u0646\u062C\u0627\u062D"),this.services.splice(e,1)},error:n=>{n.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623\u0623\u0634\u0646\u0627\u0621 \u0627\u0644\u062D\u0630\u0641")},complete:()=>{}})}onSubmit(){this.isEditMode?this.updateServic():this.addService()}allowEnglishOnly(e){let t=e.target;t.value=t.value.replace(/[^a-zA-Z0-9 ]/g,"")}allowArabicOnly(e){let t=e.target;t.value=t.value.replace(/[^ุก-ู\s\u0621-\u064A]/g,"")}validateVideo(e){let t=e.target,n=t.files?.[0];if(n){let l=n.type.startsWith("video/"),u=n.size>10*1024*1024;l?u?(this.errorMessage="\u0627\u0644\u0645\u0644\u0641 \u0623\u0643\u0628\u0631 \u0645\u0646 10 \u0645\u064A\u063A\u0627\u0628\u0627\u064A\u062A",t.value=""):this.errorMessage="":(this.errorMessage="\u0627\u0644\u0645\u0644\u0641 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0641\u064A\u062F\u064A\u0648 \u0641\u0642\u0637",t.value="")}}static \u0275fac=function(t){return new(t||s)(_($),_(q))};static \u0275cmp=x({type:s,selectors:[["app-our-services"]],standalone:!0,features:[A],decls:67,vars:8,consts:[[1,"container","first-form"],[1,"",3,"ngSubmit","formGroup","ngClass"],[1,"fas","fa-xmark","close"],[1,"row"],[1,"col-md-6","col-12"],[1,"form-group"],["for","artitle"],[1,"requierd"],["type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arTitle",1,"form-control",3,"input"],["for","entitle"],["type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enTitle",1,"form-control",3,"input"],["for","ardes"],["type","text","id","ardes","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arDescription",1,"form-control",3,"input"],["for","endes"],["type","text","id","endes","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enDescription",1,"form-control",3,"input"],["for","status"],["type","file","accept","image/*","formControlName","ImageFiles","id","images",1,"form-control",3,"change"],[1,"dash_btn"],[1,"lay"],[1,"dash_table","container"],[1,"mt-5"],[1,"project-table"],[1,"fas","fa-xmark","close",3,"click"],[1,"edit-btn",3,"click"],[1,"delete",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"form",1),a("ngSubmit",function(){return n.onSubmit()}),h(2,W,1,0,"i",2),i(3,"h2"),o(4),r(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),o(9,"\u0627\u0633\u0645 \u0627\u0644\u062E\u062F\u0645\u0629 \u0639\u0631\u0628\u064A"),i(10,"span",7),o(11,"(\u0645\u0637\u0644\u0648\u0628)"),r(),i(12,"span"),o(13,"*"),r()(),i(14,"input",8),a("input",function(u){return n.allowArabicOnly(u)}),r()()(),i(15,"div",4)(16,"div",5)(17,"label",9),o(18,"\u0627\u0633\u0645 \u0627\u0644\u062E\u062F\u0645\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A"),i(19,"span",7),o(20,"(\u0645\u0637\u0644\u0648\u0628)"),r(),i(21,"span"),o(22,"*"),r()(),i(23,"input",10),a("input",function(u){return n.allowEnglishOnly(u)}),r()()(),i(24,"div",4)(25,"div",5)(26,"label",11),o(27,"\u0648\u0635\u0641 \u0627\u0644\u062E\u062F\u0645\u0629 \u0639\u0631\u0628\u064A"),i(28,"span",7),o(29,"(\u0645\u0637\u0644\u0648\u0628)"),r(),i(30,"span"),o(31,"*"),r()(),i(32,"input",12),a("input",function(u){return n.allowArabicOnly(u)}),r()()(),i(33,"div",4)(34,"div",5)(35,"label",13),o(36,"\u0648\u0635\u0641 \u0627\u0644\u062E\u062F\u0645\u0629 \u0627\u0646\u062C\u0644\u064A\u0632\u064A"),i(37,"span",7),o(38,"(\u0645\u0637\u0644\u0648\u0628)"),r(),i(39,"span"),o(40,"*"),r()(),i(41,"input",14),a("input",function(u){return n.allowEnglishOnly(u)}),r()()(),i(42,"div",4)(43,"div",5)(44,"label",15),o(45,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u062E\u062F\u0645\u0629"),i(46,"span",7),o(47,"(\u0645\u0637\u0644\u0648\u0628)"),r(),i(48,"span"),o(49,"*"),r()(),i(50,"input",16),a("change",function(u){return n.onImagesSelected(u)}),r()()()(),i(51,"button",17),o(52),r()(),h(53,Z,1,0,"div",18),r(),i(54,"div",19)(55,"h2",20),o(56,"\u0627\u0644\u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629"),r(),i(57,"table",21)(58,"thead")(59,"tr")(60,"th"),o(61,"\u0627\u0633\u0645 \u0627\u0644\u062E\u062F\u0645\u0629"),r(),i(62,"th"),o(63,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),r()()(),i(64,"tbody"),E(65,J,8,1,"tr",null,b),r()()()),t&2&&(c(),C("formGroup",n.addForm)("ngClass",M(6,R,n.isEditMode)),c(),g(n.isEditMode?2:-1),c(2),T("",n.isEditMode?"\u062A\u0639\u062F\u064A\u0644":"\u0625\u0636\u0627\u0641\u0629"," \u062E\u062F\u0645\u0629 "),c(48),F(n.isEditMode?"\u062A\u0639\u062F\u064A\u0644":"\u0625\u0636\u0627\u0641\u0629"),c(),g(n.isEditMode?53:-1),c(12),O(n.services))},dependencies:[G,N,P,I,V,j,z,D,y],styles:["h2[_ngcontent-%COMP%]{color:#fff;background:var(--main);padding:5px 10px;margin:0 auto 30px;width:fit-content;border-radius:10px}.col-12[_ngcontent-%COMP%]{margin-bottom:30px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;color:#333}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;border-radius:6px;font-size:15px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 2px #007bff1a}.error[_ngcontent-%COMP%]{font-size:12px}.edit_form[_ngcontent-%COMP%]{position:fixed;background:#fff;border-radius:15px;padding:25px;box-shadow:var(--shadow);width:90%;height:90vh;left:50%;top:50%;transform:translate(-50%,-50%);z-index:5}.lay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;background:#00000095;z-index:3;left:0;top:0}.close[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;color:var(--blue);font-size:25px;cursor:pointer}"]})};export{L as OurServicesComponent};
