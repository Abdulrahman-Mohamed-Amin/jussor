import{a as Y}from"./chunk-3BPWJQCE.js";import{a as R}from"./chunk-JB3CRJGS.js";import{a as W}from"./chunk-N2LM7I72.js";import{a as O,b as m,c as D,d as k,e as V,f as s,g as q,h as z,i as L,j as $,k as U,l as G,o as B}from"./chunk-GYX3UYIK.js";import{h as H}from"./chunk-2NZ5WEEJ.js";import{Bb as N,Fa as f,Ia as v,Ma as g,Na as A,Oa as x,Pa as S,Qa as i,Ra as n,Sa as C,Va as E,W as b,Xa as d,Ya as _,ab as o,bb as p,ca as F,cb as y,da as P,eb as T,fb as w,qa as M,ta as c,ua as h,zb as I}from"./chunk-2KD2ZHNZ.js";var j=(r,t)=>t.id,Q=r=>({edit_form:r});function X(r,t){r&1&&C(0,"div",0)}function ee(r,t){if(r&1){let e=E();i(0,"i",37),d("click",function(){F(e);let l=_();return P(l.closeForm())}),n()}}function te(r,t){if(r&1&&(i(0,"option",20),o(1),n()),r&2){let e=t.$implicit;v("value",e.id),c(),p(e==null?null:e.arName)}}function ie(r,t){if(r&1&&(i(0,"option",20),o(1),n()),r&2){let e=t.$implicit;v("value",e==null?null:e.id),c(),p(e.arName)}}function ne(r,t){if(r&1&&(i(0,"div",31),o(1),n()),r&2){let e=_();c(),p(e.errorMessage)}}function oe(r,t){if(r&1&&(i(0,"div",39)(1,"div",40),C(2,"i",41)(3,"img",42),n()()),r&2){let e=t.$implicit;c(3),v("src","https://realstatesaudi.runasp.net"+e.imagePath,M)}}function ue(r,t){if(r&1&&(i(0,"div",32)(1,"h4",38),o(2,"\u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631"),n(),x(3,oe,4,1,"div",39,j),n()),r&2){let e=_();c(3),S(e.selectedProject.projectImages)}}function re(r,t){r&1&&C(0,"div",0)}function ae(r,t){if(r&1){let e=E();i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td")(6,"button",43),d("click",function(){let l=F(e).$implicit,a=_();return a.editProject(l.id,l),P(a.close=!0)}),o(7,"\u062A\u0639\u062F\u064A\u0644"),n(),i(8,"button",44),d("click",function(){let l=F(e),a=l.$implicit,J=l.$index,K=_();return P(K.deleteProject(J,a.id))}),o(9,"\u062D\u0630\u0641"),n()()()}if(r&2){let e=t.$implicit;c(2),p(e.arTitle),c(2),p(e.projectStatus==null?null:e.projectStatus.arName)}}var Z=class r{constructor(t,e,u,l){this._types=t;this._status=e;this._projects=u;this.toast=l}types=[];status=[];projects=[];errorMessage="";close=!1;isEditMode=!1;selectedProjectId=null;selectedProject=null;videoFile=null;imageFiles=[];interfaceImageFile=null;proposalFile=null;addForm=new V({id:new s(0),arTitle:new s("",m.required),arDescription:new s("",m.required),enTitle:new s("",m.required),enDescription:new s("",m.required),arlocationName:new s(null,m.required),enlocationName:new s(null,m.required),locationUrl:new s("",m.required),latitude:new s(0),longitude:new s(0),videoFile:new s(null),videoPath:new s(null),projectImages:new s([]),projectStatusId:new s(null,m.required),projectTypeId:new s(null,m.required),interfaceImageFile:new s(null),proposalFile:new s(null),deleteInterfaceImage:new s(!1),deleteProposalFile:new s(!1),imagesToDelete:new s([])});ngOnInit(){this.getTypes(),this.getStatus(),this.getProjects()}getStatus(){this._status.getALlStatus().subscribe(t=>{this.status=t})}getTypes(){this._types.getALltype().subscribe(t=>{this.types=t})}closeForm(){this.isEditMode=!1,this.addForm.reset()}onVideoSelected(t){let e=t.target.files[0];this.videoFile=e||null}onImagesSelected(t){let e=t.target.files;this.imageFiles=[];for(let u=0;u<e.length;u++)this.imageFiles.push(e[u])}onInterfaceImageSelected(t){let e=t.target.files[0];this.interfaceImageFile=e||null}onProposalFileSelected(t){let e=t.target.files[0];this.proposalFile=e||null}checkForProjects(){for(let t=0;t<this.projects.length;t++)if(this.addForm.value.arTitle==this.projects[t].arTitle)return!1;return!0}getProjects(){this._projects.getAllProjects().subscribe(t=>{this.projects=t,console.log(t)})}addProject(){let t=new FormData;t.append("ArTitle",this.addForm.value.arTitle),t.append("ArDescription",this.addForm.value.arDescription),t.append("EnTitle",this.addForm.value.enTitle),t.append("EnDescription",this.addForm.value.enDescription),t.append("arlocationName",this.addForm.value.arlocationName),t.append("enlocationName",this.addForm.value.enlocationName),t.append("LocationUrl",this.addForm.value.locationUrl),t.append("Latitude",this.addForm.value.latitude),t.append("Longitude",this.addForm.value.longitude),t.append("ProjectStatusId",this.addForm.value.projectStatusId),t.append("ProjectTypeId",this.addForm.value.projectTypeId),this.interfaceImageFile&&t.append("interfaceImageFile",this.interfaceImageFile),this.proposalFile&&t.append("proposalFile",this.proposalFile),this.videoFile&&t.append("videoFile",this.videoFile),this.imageFiles.length>0&&this.imageFiles.forEach(e=>{t.append("imageFiles",e)}),this.addForm.valid?this.checkForProjects()?this._projects.addProject(t).subscribe({next:e=>{this.addForm.reset(),this.toast.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0628\u0646\u062C\u0627\u062D")},error:e=>{e.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")},complete:()=>{window.location.reload()}}):this.toast.error("\u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0645\u0648\u062C\u0648\u062F \u0628\u0627\u0644\u0641\u0639\u0644"):this.toast.error("\u0628\u0639\u0636 \u0627\u0644\u062D\u0642\u0648\u0644 \u0641\u0627\u0631\u063A\u0629")}editProject(t,e){this.addForm.patchValue({id:e.id,arTitle:e.arTitle,arDescription:e.arDescription,enTitle:e.enTitle,enDescription:e.enDescription,arlocationName:e.arLocationName,enlocationName:e.enLocationName,locationUrl:e.locationUrl,latitude:e.latitude,longitude:e.longitude}),this.isEditMode=!0,this.selectedProjectId=e.id,this.selectedProject=e,this.videoFile=null,this.interfaceImageFile=null,this.proposalFile=null,this.imageFiles=[]}deleteProject(t,e){this._projects.deleteProject(e).subscribe({next:u=>{this.projects.splice(t,1),this.toast.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0628\u0646\u062C\u0627\u062D ")},error:u=>{u.status==401?this.toast.error("\u0627\u0646\u062A\u0647\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u0633\u062C\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u064A"):this.toast.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627")}})}onSubmit(){this.isEditMode||this.addProject()}allowEnglishOnly(t){let e=t.target;e.value=e.value.replace(/[^a-zA-Z0-9 ]/g,"")}allowArabicOnly(t){let e=t.target;e.value=e.value.replace(/[^ุก-ู\s\u0621-\u064A]/g,"")}validateVideo(t){let e=t.target,u=e.files?.[0];if(u){let l=u.type.startsWith("video/"),a=u.size>10*1024*1024;l?a?(this.errorMessage="\u0627\u0644\u0645\u0644\u0641 \u0623\u0643\u0628\u0631 \u0645\u0646 10 \u0645\u064A\u063A\u0627\u0628\u0627\u064A\u062A",e.value=""):this.errorMessage="":(this.errorMessage="\u0627\u0644\u0645\u0644\u0641 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0641\u064A\u062F\u064A\u0648 \u0641\u0642\u0637",e.value="")}}static \u0275fac=function(e){return new(e||r)(h(R),h(W),h(Y),h(H))};static \u0275cmp=b({type:r,selectors:[["app-manage-projects"]],standalone:!0,features:[T],decls:126,vars:11,consts:[[1,"lay"],[1,"container"],[3,"ngSubmit","formGroup","ngClass"],[1,"fas","fa-xmark","close"],[1,"row"],[1,"col-md-6","col-12"],[1,"form-group"],["for","artitle"],["type","text","id","artitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arTitle",1,"form-control",3,"input"],["for","entitle"],["type","text","id","entitle","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enTitle",1,"form-control",3,"input"],["for","ardes"],["type","text","id","ardes","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arDescription",1,"form-control",3,"input"],["for","endes"],["type","text","id","endes","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0627\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637","formControlName","enDescription",1,"form-control",3,"input"],["for","adress"],["type","text","id","adress","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","arlocationName",1,"form-control",3,"input"],["type","text","id","adress","placeholder","\u0627\u0644\u0627\u062F\u062E\u0627\u0644 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637","formControlName","enlocationName",1,"form-control",3,"input"],["for","status"],["formControlName","projectStatusId","id","status",1,"form-select"],[3,"value"],["for","types"],["formControlName","projectTypeId","id","types",1,"form-select"],["for","location"],["type","text","id","location","placeholder","\u0627\u062F\u062E\u0644 \u0631\u0627\u0628\u0637 \u0627\u0644\u0645\u0648\u0642\u0639","formControlName","locationUrl",1,"form-control"],["type","file","accept","image/*","formControlName","interfaceImageFile",1,"form-control",3,"change"],["type","file","accept","image/*","multiple","","formControlName","projectImages","id","images",1,"form-control",3,"change"],[1,"requierd"],["type","file","accept","file/*","multiple","","formControlName","proposalFile",1,"form-control",3,"change"],["for","vedio"],["type","file","id","vedio","placeholder","\u0641\u064A\u062F\u064A\u0648 \u0641\u0642\u0637","formControlName","videoPath",1,"form-control",3,"change"],[1,"text-danger","error"],[1,"row","gy-4"],[1,"dash_btn"],[1,"container","dash_table"],[1,"mt-5"],[1,"project-table"],[1,"fas","fa-xmark","close",3,"click"],[1,"img_delete_title"],[1,"col-2"],[1,"img_cont"],[1,"fas","fa-trash","delete"],["alt","",3,"src"],[1,"edit-btn",3,"click"],[1,"delete",3,"click"]],template:function(e,u){e&1&&(f(0,X,1,0,"div",0),i(1,"div",1)(2,"form",2),d("ngSubmit",function(){return u.onSubmit()}),i(3,"h2"),o(4),n(),f(5,ee,1,0,"i",3),i(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),o(10,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0639\u0631\u0628\u064A "),i(11,"span"),o(12,"*"),n()(),i(13,"input",8),d("input",function(a){return u.allowArabicOnly(a)}),n()()(),i(14,"div",5)(15,"div",6)(16,"label",9),o(17,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0627\u0646\u062C\u0644\u064A\u0632\u064A "),i(18,"span"),o(19,"*"),n()(),i(20,"input",10),d("input",function(a){return u.allowEnglishOnly(a)}),n()()(),i(21,"div",5)(22,"div",6)(23,"label",11),o(24,"\u0648\u0635\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0639\u0631\u0628\u064A "),i(25,"span"),o(26,"*"),n()(),i(27,"input",12),d("input",function(a){return u.allowArabicOnly(a)}),n()()(),i(28,"div",5)(29,"div",6)(30,"label",13),o(31,"\u0648\u0635\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0627\u0646\u062C\u0644\u064A\u0632\u064A "),i(32,"span"),o(33,"*"),n()(),i(34,"input",14),d("input",function(a){return u.allowEnglishOnly(a)}),n()()(),i(35,"div",5)(36,"div",6)(37,"label",15),o(38,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0639\u0631\u0628\u064A "),i(39,"span"),o(40,"*"),n()(),i(41,"input",16),d("input",function(a){return u.allowArabicOnly(a)}),n()()(),i(42,"div",5)(43,"div",6)(44,"label",15),o(45,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0627\u0646\u062C\u0644\u064A\u0632\u064A "),i(46,"span"),o(47,"*"),n()(),i(48,"input",17),d("input",function(a){return u.allowEnglishOnly(a)}),n()()(),i(49,"div",5)(50,"div",6)(51,"label",18),o(52,"\u0627\u062E\u062A\u0631 \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),i(53,"span"),o(54,"*"),n()(),i(55,"select",19),x(56,te,2,2,"option",20,j),n()()(),i(58,"div",5)(59,"div",6)(60,"label",21),o(61,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),i(62,"span"),o(63,"*"),n()(),i(64,"select",22),x(65,ie,2,2,"option",20,j),n()()(),i(67,"div",5)(68,"div",6)(69,"label",23),o(70,"\u0631\u0627\u0628\u0637 \u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),i(71,"span"),o(72,"*"),n()(),C(73,"input",24),n()(),i(74,"div",5)(75,"div",6)(76,"label",18),o(77,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u0648\u0627\u062C\u0647\u0629 "),i(78,"span"),o(79,"*"),n()(),i(80,"input",25),d("change",function(a){return u.onInterfaceImageSelected(a)}),n()()(),i(81,"div",5)(82,"div",6)(83,"label",18),o(84,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),i(85,"span"),o(86,"*"),n()(),i(87,"input",26),d("change",function(a){return u.onImagesSelected(a)}),n()()(),i(88,"div",5)(89,"div",6)(90,"label",18),o(91,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u062A\u0639\u0631\u064A\u0641\u064A \u0644\u0644\u0645\u0634\u0631\u0648\u0639"),i(92,"span",27),o(93,"(\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),n(),i(94,"span"),o(95,"*"),n()(),i(96,"input",28),d("change",function(a){return u.onProposalFileSelected(a)}),n()()(),i(97,"div",5)(98,"div",6)(99,"label",29),o(100,"\u0627\u062E\u062A\u0631 \u0641\u064A\u062F\u064A\u0648"),i(101,"span",27),o(102,"(\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),n(),i(103,"span"),o(104,"*"),n()(),i(105,"input",30),d("change",function(a){return u.onVideoSelected(a)}),n()(),f(106,ne,2,1,"div",31),n()(),f(107,ue,5,0,"div",32),i(108,"button",33),o(109),n()(),f(110,re,1,0,"div",0),n(),i(111,"div",34)(112,"h2",35),o(113,"\u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629"),n(),i(114,"table",36)(115,"thead")(116,"tr")(117,"th"),o(118,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"),n(),i(119,"th"),o(120,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"),n(),i(121,"th"),o(122,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),n()()(),i(123,"tbody"),x(124,ae,10,2,"tr",null,A),n()()()),e&2&&(g(u.isEditMode?0:-1),c(2),v("formGroup",u.addForm)("ngClass",w(9,Q,u.isEditMode)),c(2),y("",u.isEditMode?"\u062A\u0639\u062F\u064A\u0644":"\u0625\u0636\u0627\u0641\u0629"," \u0645\u0634\u0631\u0648\u0639 "),c(),g(u.isEditMode?5:-1),c(51),S(u.status),c(9),S(u.types),c(41),g(u.errorMessage!==""?106:-1),c(),g(u.selectedProject&&u.isEditMode?107:-1),c(2),p(u.isEditMode?"\u062A\u0639\u062F\u064A\u0644":"\u0625\u0636\u0627\u0641\u0629"),c(),g(u.isEditMode?110:-1),c(14),S(u.projects))},dependencies:[B,q,U,G,O,$,D,k,z,L,N,I],styles:["h2[_ngcontent-%COMP%]{color:#fff;background:var(--main);padding:5px 10px;margin:0 auto 30px;width:fit-content;border-radius:10px}.col-12[_ngcontent-%COMP%]{margin-bottom:30px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;color:#333}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;border-radius:6px;font-size:15px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 2px #007bff1a}.error[_ngcontent-%COMP%]{font-size:12px}.edit_form[_ngcontent-%COMP%]{position:fixed;background:#fff;border-radius:15px;padding:25px;box-shadow:var(--shadow);width:95%;height:95vh;left:50%;top:50%;transform:translate(-50%,-50%);z-index:10;overflow:auto}.lay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;background:#00000095;z-index:1;left:0;top:0}.close[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;color:var(--blue);font-size:25px;cursor:pointer}input[_ngcontent-%COMP%]::placeholder{color:var(--main);font-size:11px}.img_cont[_ngcontent-%COMP%]{position:relative}.img_cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px}.img_cont[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;font-size:15px;width:25px;height:25px;line-height:25px;text-align:center;border-radius:50%;cursor:pointer}.img_cont[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%]{color:red;transform:translateY(3px)}.img_delete_title[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center;color:var(--main)}"]})};export{Z as ManageProjectsComponent};
